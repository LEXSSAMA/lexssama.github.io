<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/spider.png">
  <link rel="icon" type="image/png" href="/img/spider.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>sched_init() ~ lexssama</title>
  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
  <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
  <link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
  <link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">
  
    <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >
  
  <link rel="stylesheet" href="/css/main.css"  >

  
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>lexssama</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/136457.jpg')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              <p class="mt-3">星期三, 十二月 18日 2019, 6:05 晚上</p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto">
          <div class="markdown-body">
            <h1 id="sched-init"><a href="#sched-init" class="headerlink" title="sched_init()"></a>sched_init()</h1><pre><code>//sched_init()源码：
 int i;
struct desc_struct *p;  //描述符结构指针。</code></pre><p><strong>desc_struct 结构被定义在include/linux/head.h中,具体如下:<br></strong></p>
<pre><code>typedef struct desc_struct 
{   //定义了段描述符的数据结构，该结构仅说明每个描述符
    unsigned long a,b;  //符由8个字节直接构成，每个描述符表共有256项
}desc_table[256];</code></pre><p>Linux 系统开发之初，内核不成熟。内核代码会经常被修改<br><br>linus怕自己无意中修改了这些关键性的数据结构，造成POSIX标准<br><br>的不兼容。这里加入的这个判断语句并无必要，纯粹是为了提醒自己<br><br>以及其他修改内核代码的人。<br></p>
<pre><code>//sched_init()源码：
if(sizeof(struct sigaction)!=16)    //sigaction是存放有关信号状态的结构
panic(&quot;Struct sigaction MUST be 16 bytes&quot;);</code></pre><p><strong>panic定义在kernel/panic.c</strong></p>
<pre><code>void sys_sync(void);
//该函数用来显示内核中出现的重大错误信息，并且运行文件系统同步函数，
//然后进入死循环-&gt;死机。如果当前进程是任务0的话，还说明是交换任务出错
//并且还没有运行文件系统同步函数。函数名前的关键字volatile用于告诉编译器gcc
//该函数不会返回。这样可让gcc产生更好一些的代码，更重要的是这个关键字可以避免
//某些（未初始化变量的）假警告信息。
//等同于现在gcc的函数属性说明：void panic（const char *s）_attribute_((noreturn));
volatile void panic(const char *s)
{
    printk(&quot;Kernel panic: %s\n\r&quot;,s);
    if(current==task[0])
    printk(&quot;In swapper task - not syncing\n\r&quot;);
    else
    sys_sync();
    for(;;);
}</code></pre><p>在全局描述符表中设置初始任务（任务0）的任务状态段描述符和局部数据描述符。<br><br><strong>FIRST_TSS_ENTRY(#define FIRST_TSS_ENTRY 4   //全局表中第一个任务状态段（TSS）描述符的选择索引号)</strong><br><br><strong>FIRST_LDT_ENTRY(#define FIRST_LDT_ENTRY （FIRST_TSS_ENTRY+1） //全局表中第1个局部描述符表（LDT）描述符的选择符索引号)值分别是4和5定义在include/linux/sched.h中</strong>；<br><br>gdt是一个描述符表数组（include/linux/head.h），实际上对应程序head.s中的<br>234行上的全局描述符表基址（_gdt）。<br><br>因此gdt+FIRST_TSS_ENTRY即为gdt[FIRST_TSS_ENTRY]即为gdt[4]),也即gdt数组第4项的地址，参见include/asm/system.h，第65行开始。<br></p>
<pre><code>//sched_init()源码：
set_tss_desc(gdt+FIRST_TSS_ENTRY，&amp;(init_task.task.tss));
set_ldt_desc(gdt+FIRST_LDT_ENTRY,&amp;(init_task.task.ldt));</code></pre><p><strong>下面的三个define都是定义在include/asm/system.h。</strong></p>
<pre><code>////在全局表中设置任务状态段/局部表描述符。状态段和局部表段的长度均被设置成104字节
//参数：n -在全局表中的描述符项n所对应的地址；addr -状态段/局部表所在的基地址。
//      type - 描述符中的标志类型字节。
//%0 -eax(地址addr)；%1 -(描述符项n的地址)；%2 -(描述符项n的地址偏移2处)；
//%3 -（描述符项n的地址偏移4处）；%4 -（描述符项n的地址偏移5处）；
//%5 -（描述符项n的地址偏移6处）；%6 -（描述符项n的地址偏移7处）；
#define set_tssldt_desc (n,addr,type) \ //这里对比计算机系统基础第302页 段描述符图就更好理解
_asm_ (&quot;movw $104,%1\n\t&quot;\  //将TSS（或LDT）长度放入描述符长度域【界限】（第0-1字节）
       &quot;movw %%ax,%2\n\t&quot;\  //将基地址的低字放入描述符第2-3字节。
       &quot;rorl $16,%%eax\n\t&quot;\    //将基地址高字右循环移入ax中（低字则进入高字处）。
       &quot;movb %%al,%3\n\t&quot;\  //将基地址高字中低字节移入描述符第4字节。
       &quot;movb $&quot;type&quot;,%4\n\t&quot;\   //将标志类型字节移入描述符的第5字节
       &quot;movb $0x00,%5\n\t&quot;\ //描述符第6字节置0。
       &quot;movb %%ah,%6\n\t&quot;\  //将基地址高字中高字节移入描述符第7个字节。
       &quot;rorl $16,%%eax&quot;\    //在右循环16比特，eax恢复原值。
       :: &quot;a&quot;(addr),&quot;m&quot;(*(n)),&quot;m&quot;(*(n+2)),&quot;m&quot;(*(n+4)), \
       &quot;m&quot;(*(n+5)),&quot;m&quot;(*(n+6)),&quot;m&quot;(*(n+7))\
       )

////在全局表中设置任务状态段描述符。
// n - 是该描述符的指针；addr - 是描述符项中段的基地址。
//任务段描述符（TSS）的类型是0x89
#define set_tss_desc(n,addr) _set_tssldt_desc(((char *)(n)),addr,&quot;0x89&quot;);

////在全局表中设置局部表描述符。
// n - 是该描述符的指针；addr -是描述符中段的基地址值。
//局部表段描述符(ldt)的类型是0x82。
#define set_ldt_desc(n,addr) _set_tssldt_desc(((char *)(n)),addr,&quot;0x82&quot;);</code></pre><p><strong>init_task.task.tss和init_task.task.ldt则是定义在kernel/sched.c</strong></p>
<pre><code>union task_union {
    struct task_struct task;
    char stack[PAGE_SIZE];
};
static union task_union init_task = {INIT_TASK,};</code></pre><p><strong>其中INIT_TASK是被定义在include/linux/sched.h中</strong></p>
<pre><code>#define INIT_TASK \
/* state etc */    { 0,15,15, \
/* signals */    0,{{},},0, \
/* ec,brk... */    0,0,0,0,0,0, \
/* pid etc.. */    0,-1,0,0,0, \
/* uid etc */    0,0,0,0,0,0, \
/* alarm */    0,0,0,0,0,0, \
/* math */    0, \
/* fs info */    -1,0022,NULL,NULL,NULL,0, \
/* filp */    {NULL,}, \
    { \
        {0,0}, \
/* ldt */    {0x9f,0xc0fa00}, \
        {0x9f,0xc0f200}, \
    }, \
/*tss*/    {0,PAGE_SIZE+(long)&amp;init_task,0x10,0,0,0,0,(long)&amp;pg_dir,\
     0,0,0,0,0,0,0,0, \
     0,0,0x17,0x17,0x17,0x17,0x17,0x17, \
     _LDT(0),0x80000000, \
        {} \
    }, \
}</code></pre><p>清任务数组和描述符表项（注意i=1开始，所以刚刚设置初始任务的描述符还在）.</p>
<pre><code>//sched_init()源码：
p=gdt+2+FIRST_TSS_ENTRY;    //不清除前面的6个描述符所以+2
for(i=1,i&lt;NR_TASKS;i++)
{
    task[i]=NULL;
    p-&gt;a=p-&gt;b=0; //这里是清除TSS
    p++;
    p-&gt;a=p-&gt;b=0; //P++后这里清除LDT
    p++;
}</code></pre><p><strong>take[]被定义在include/linux/head.h中</strong><br></p>
<pre><code>extern struct task_struct *task[NR_TASKS];</code></pre><p><strong>task_struct结构也是被定义在include/linux/head.h中</strong><br></p>
<pre><code>struct task_struct {
/* these are hardcoded - don&#39;t touch */
    long state;    /* -1 unrunnable, 0 runnable, &gt;0 stopped */
    long counter;
    long priority;
    long signal;
    struct sigaction sigaction[32];
    long blocked;    /* bitmap of masked signals */
/* various fields */
    int exit_code;
    unsigned long start_code,end_code,end_data,brk,start_stack;
    long pid,father,pgrp,session,leader;
    unsigned short uid,euid,suid;
    unsigned short gid,egid,sgid;
    long alarm;
    long utime,stime,cutime,cstime,start_time;
    unsigned short used_math;
/* file system info */
    int tty;        /* -1 if no tty, so it must be signed */
    unsigned short umask;
    struct m_inode * pwd;
    struct 
     * root;
    struct m_inode * executable;
    unsigned long close_on_exec;
    struct file * filp[NR_OPEN];
/* ldt for this task 0 - zero 1 - cs 2 - ds&amp;ss */
    struct desc_struct ldt[3];
/* tss for this task */
    struct tss_struct tss;
};</code></pre><p>清除标志寄存器中的位NT，这样以后就不会有麻烦<br><br>NT标志用于扩展程序的递归调用（Nested Task）。当NT置位时，那么当前中断<br><br>任务执行iret指令时就会引起任务切换。NT指出TSS数据结构中的back_link字段是否有效<br></p>
<pre><code>//sched_init()源码
// pushf 是把堆栈指针esp减去2，使其指向堆栈顶部的空字单元，然后将16位标志寄存器的
//内容送向esp指向的字的单元。
//pushl作用与pushf一样但却是把32位标志寄存器（标志寄存器原本就是32位）
//popf和popfl是弹出。
_asm_(&quot;pushfl ; andl $0xffffbfff,(%esp);popfl&quot;); //复位NT标志。</code></pre><p>将任务0的TSS段选择符加载到任务寄存器tr。将局部描述符表段选择符加载到局部描述符表段选择符加载到局部描述符寄存器ldtr中。<br><br>！！注意是将GDT中相应的LDT描述符选择符加载到ldtr。只明确加这一次，以后新任务LDT的加载，是CPU根据TSS中的/LDT项自动加载。<br></p>
<pre><code>//sched_init()源码
ltr(0);     
lldt(0);</code></pre><p><strong>下面的4个#define定义在include/linux/sched.h</strong><br></p>
<pre><code>// 宏定义，计算全局表中第n个任务的TSS段描述符的选择符值（偏移量）。
// 因每个描述符占8字节，因此FIRST_TSS_ENTRY&lt;&lt;3表示描述符在GDT表中的起始偏移位置
//因为每个任务都使用一个TSS和一个LDT描述符，共占用16个字节因此需要n&lt;&lt;4来表示对应
//TSS起始位置，该宏得到的值页正好是该TSS的选择符值。
#define _TSS(n) ((((unsigned long)n)&lt;&lt;4)+(FIRST_TSS_ENTRY&lt;&lt;3))
#define _LDT(n) ((((unsigned long)n)&lt;&lt;4)+(FIRST_LDT_ENTRY&lt;&lt;3))
// ltr指令是系统指令，作用是把TSS段选择符加载到任务寄存器中（TR：16位）
#define ltr(n) _asm_(&quot;ltr %%ax&quot;::&quot;a&quot;(_TSS(n)))
// lldt指令是系统指令，作用是把LDT段选择符加载到任务寄存器中（LDTR：16位）
#define lldt(n) _asm_(&quot;lldt %%ax&quot;::&quot;a&quot;(_LDT(n))) </code></pre><p>下面代码用于初始化8253定时器(不懂8253定时器可以看这篇博客：<a href="https://lexssama.github.io/2019/12/16/8253%E5%AE%9A%E6%97%B6%E5%99%A8-%E8%AE%A1%E6%95%B0%E5%99%A8/" target="_blank" rel="noopener">8253定时器/计时器</a>)。通道0，选择工作方式3（方波发生器），二进制计数方式<br><br>通道0的输出引脚接在中断控制主芯片的IRQ0上，它每10毫秒发出一个IRQ请求。<br><br>LATCH是初始定时计数器。<br><br>0x36（00110110）[00（选择计数器0） 11（16位，先读/写低字节，然后再读/写高字节） 011（方式3） 0（2进制计数）]是参数，0x43是端口，写控制字给8253</p>
<pre><code>//sched_init()源码
outb_p(0x36,0x43); //写8253定时器控制字</code></pre><p>这里&amp;与&amp;&amp;区分，&amp;是把两个数转化成二进制数运算，&amp;&amp;是两个值都为true的时候 整体为True<br><br>LATCH &amp; 0xff得到的就是LATCH的低8位，而且8253定时器一次只能传入8位。<br><br>LATCH也是定义在这个函数同一个文件下#define LATCH (1193180/HZ)<br><br>这里的HZ是// HZ定义在include/linux/sched.h头文件中 #define HZ 100<br><br>这里解释以下为什么LATCH要是1193180/HZ（1193180/100）因为8254芯片的时钟输入频率是1.193180MHZ<br><br>而linus希望系统每10ms就发出一个时钟中断请求（IRQ0）信号，所以需要设置计数器的值为1193180/100<br></p>
<pre><code>//sched_init()源码
outb_p(LATCH &amp; 0xff,0x40);    //写定时值低字节
outb(LATCH&gt;&gt;8,0x40);    //定时值高字节</code></pre><p><strong>定义在include/asm/io.h</strong></p>
<pre><code>//硬件端口字节输出函数。
//参数：value -欲输入字节；port -端口。
#define outb(value,port)\
_asm_(&quot;outb %%al,%%dx&quot;::&quot;a&quot;(value),&quot;d&quot;(port))

////硬件端口字节输入函数。
//参数：port - 端口。返回读取的字节。
#define inb(port)（{\
unsigned char _v;\
_asm_volatile (&quot;inb %%dx,%%al&quot;:&quot;=a&quot;(_v):&quot;d&quot;(port));\
_v;\
})

// 带延迟的硬件端口字节输出函数，使用两条跳转语句来延迟一会（为什么？）
// 参数：value -欲输出字节；port -端口。
#define outb_p(value,port)\
_asm_(&quot;outb %%al,%%dx\n&quot;\   //这里的outb是吧%al的内容写到%dx端口去。
            &quot;\tjmp lf\n&quot;\   //向前跳转到标号1处（即下一条语句处）
            &quot;1:\tjmp lf\n&quot;\ //先前跳转到标号1处
            &quot;1:&quot;::&quot;a&quot;(value),&quot;d&quot;(port))
//// 带延迟的硬件端口字节输入函数。使用两条跳转语句来延迟一会。
//参数：port -端口，返回读取的字节
#define inb_p(port)({\
unsigned char _v;\
_asm_volatile(&quot;inb %%dx,%%al\n&quot;\
                &quot;\tjmp 1f\n&quot;\
                &quot;1:\tjmp 1f\n&quot;\
                &quot;1:&quot;:&quot;=a&quot;(_v):&quot;d&quot;(port));\
                _v;\
                })</code></pre><p>设置时钟中断处理程序句柄（设置时钟中断门），修改中断控制器屏蔽码，允许时钟中断。<br><br>然后设置系统中断门，这两个设置中断描述符表IDT中描述符的宏定义<br><br>在文件include/asm/system.h中第33行，39行处，两者的区别参见system.h文件开始处的说明<br><br>设置int0x20中断时时钟中断<br>    //sched_init()源码<br>    set_intr_gate (0x20，&amp;timer_interrupt);</p>
<p> ~ ：取反运算符，按二进制位进行”取反”运算， &amp;:与指令 <br><br>这里就是读8259A上的IMR(中断屏蔽寄存器)的当前屏蔽字，然后与上11111110B( ~ 0x01)，然后再写OCW1<br></p>
<pre><code>//sched_init()源码
outb(inb_p(0x21)&amp;~0x01,0x21);</code></pre><p>设置int0x80是系统调用中断</p>
<pre><code>//sched_init()源码
set_system_gate(0x80,&amp;system_call);</code></pre><p><strong>设置门描述符宏，定义在include/asm/system.h</strong></p>
<pre><code>//根据参数中的中断或异常处理过程地址addr，门描述符类型type和特权级信息dpl，设置
//位于地址gate_addr处的门描述符。（注意：下面“偏移”值是相对与内核代码或数据来说的）
//参数：gate_addr -描述符地址，type-描述类型域值；dpl-描述符特权级，addr -偏移地址
#define _set_gate(gate_addr,type,dpl,addr)\
_asm_(&quot;movw %%dx,%%ax\n\t&quot;\
&quot;movw %0,%%dx\n\t&quot;\
&quot;movw %%eax,%1\n\t&quot;\
&quot;movl %%edx,%2&quot;\
:\
:&quot;i&quot;((short)(0x8000+(dpl&lt;&lt;13)+(type&lt;&lt;8))),\
&quot;o&quot;(*((char*)(gate_addr))),\
&quot;o&quot;(*(4+(char*)(gate_addr))),\
&quot;d&quot;((char*)(addr)),&quot;a&quot;(0x00080000))
////设置中断门函数（自动屏蔽随后的中断）。
//参数：n -中断号；addr -中断程序偏移地址。
//&amp;idt[n]是中断描述符表中中断号n对应项的偏移值；中断描述符的类型是14，特权级是0。
#define set_intr_gate(n,addr)\
        _set_gate(&amp;idt[n],14,0,addr)
////设置陷阱门函数
//参数： n -中断号；addr -中断程序偏移地址。
//&amp;idt[n]是中断描述符表中 中断号n对应项的偏移值；中断描述符的类型是15，特权级是0
#define set_trap_gate(n,addr)
        _set_gate(&amp;idt[n],15,0,addr)
////设置系统陷阱门函数
//上面的set_trap_gate()设置的描述符的特权级是0，而这里是3，因此set_system_gate()
//设置的中断处理过程能够被所有的程序执行。例如单步调试，溢出出错和边界超出出错处理
//参数：n -中断号；addr -中断程序偏移地址。
//&amp;idt[n]是中断描述符表中中断号对应项的偏移地址；中断描述符的类型是15，特权级是3
#define set_system_gate(n,addr)\
        _set_gate(&amp;idt[n],15,3,addr)</code></pre>
            <hr>
          </div>
          <br>
          <div>
            
              <p>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F">操作系统</a>
                  &nbsp;
                
                  <a class="hover-with-bg" href="/categories/Linux-0.11%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">Linux-0.11源码分析</a>
                  &nbsp;
                
              </p>
            
            <p>
              <i class="iconfont icon-tag"></i>
              
                <a class="hover-with-bg" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F">操作系统</a>
              
                <a class="hover-with-bg" href="/tags/Linux-0.11%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">Linux-0.11源码分析</a>
              
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>
    
  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>

  <script src="/js/lazyload.js" ></script>


  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>


  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint linenums');
      prettyPrint();
    })
  </script>


  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "sched_init()&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 80,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>


  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script>
    if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent) || (/Safari/i.test(navigator.userAgent) && !/Chrome/i.test(navigator.userAgent))) {
      $("#background").css("background-attachment", "scroll");
    }
  </script>

</body>
</html>
