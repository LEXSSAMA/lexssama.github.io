---
title: 有符号数右移32位
index_img: /Picture/wallhaven-q6q2e5.jpg
date: 2020-11-28 23:17:33
tags:
- C/C++
categories:
- C/C++
banner_img:
---

在做项目的过程中把右移31位写成了右移32位，造成了大错，找了好久的bug，心累!!<br>
于是我发现一个我无法理解的情况，**有符号右移32位得到的数和原来未移动的数相同。**<br>
```c++
#include<iostream>
using namespace std;
int main() {
	int n = 0x11;
	int n1 = n>>32;
	printf("n1==0x%x\n",n1);
	return 0;
}
```
**Output:**<br>
``n1==0x11``<br>

*为什么会发生这样的事情呢?*<br>

**原因是: 对于32-bit的int,`n>>32`这一指令是未定义行为(undefined behaviour),所以处理器做出32%32的处理，所以最终`n>>32`就相当于`n>>0`,所以移动后的数和未移动的数相等。<br>**

下面我们做一下验证:`n>>33`<br>
```c++
#include<iostream>
using namespace std;
int main() {
	int n = 0x11;
	int n1 = n>>33;
	printf("n1==0x%x\n",n1);
	return 0;
}
```
Output:<br>
`n1==0x8`<br>

n>>33 就相当与n>>1;<br>
